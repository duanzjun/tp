<include file="Public:header" />
<div class="container-fluid">
    <div class="mg-btm10"><a class="btn btn-default" href="{:U('category/add')}">添加分类</a></div>
    <table class="table table-hover table-bordered">
    <thead>
    <tr>
        <th class="text-center"><input type="checkbox" onclick="$('input[name*=\'checked\']').prop('checked',this.checked)" /></th>
        <th>分类名称</th>
        <th>显示</th>
        <th width="150">排序</th>
        <th class="text-right">操作管理</th>
    </tr>
    </thead>
    <tbody>
    <volist name="categories" id="cate">
    <tr class="lst-parent" id="lst-{$cate.id}" ><td class='text-center'><input type='checkbox' name='checked[]' value='{$cate.id}' /></td>
        <td><i class="glyphicon glyphicon-plus"></i>{$cate.cate_name}</td>
        <td>{$cate.is_active}</td>
        <td>{$cate.order_sort}</td>
        <td class="text-right"><a href="{:U('category/add',array('id'=>$cate['id']))}">添加子分类</a> | <a href="{:U('category/edit',array('id'=>$cate['id']))}">编辑</a> | <a class="confirmurl" data-msg="你确定删除【'.$cate['cate_name'].'】吗？'."\n".'不能删除有子级的内容！" data-uri="{:U('category/del',array('id'=>$cate['id']))}" href="#">删除</a></td>
    </tr>
    <foreach name="cate._child" item="chd">
    <tr class="lst-child lst-{$cate.id}-child"><td class='text-center'><input type='checkbox' name='checked[]' value='{$chd.id}' /></td>
        <td><i class="glyphicon glyphicon-minus">{$chd.cate_name}</td>
        <td>{$chd.is_active}</td>
        <td>{$chd.order_sort}</td>
        <td class="text-right"><a href="{:U('category/add',array('id'=>$chd['id']))}">添加子分类</a> | <a href="{:U('category/edit',array('id'=>$chd['id']))}">编辑</a> | <a class="confirmurl" data-msg="你确定删除【'.$chd['cate_name'].'】吗？'."\n".'不能删除有子级的内容！" data-uri="{:U('category/del',array('id'=>$chd['id']))}" href="#">删除</a></td>
    </tr>
    </foreach>
    </volist>
        <!-- {$html_tree} -->
    </tbody>
    </table>
</div>
<script>
$('.lst-parent').on('click',function(){
    if($('.'+$(this).attr('id')+'-child').is(':hidden')){
        $(this).find('td i').prop('class','glyphicon glyphicon-minus');
    }else{
        $(this).find('td i').prop('class','glyphicon glyphicon-plus');
    }
    $('.'+$(this).attr('id')+'-child').fadeToggle();
});
</script>
<include file="Public:footer" />